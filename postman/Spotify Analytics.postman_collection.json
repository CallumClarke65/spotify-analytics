{
	"info": {
		"_postman_id": "4c030de1-bc5d-4e2a-99cd-5c000c7fbe93",
		"name": "Spotify Analytics",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "49374887",
		"_collection_link": "https://callumclarke65-af53a6b3-4489667.postman.co/workspace/Callum's-Workspace~079ee257-1f8b-4cf0-8c2f-f5d33ae46138/collection/49374887-4c030de1-bc5d-4e2a-99cd-5c000c7fbe93?action=share&source=collection_link&creator=49374887"
	},
	"item": [
		{
			"name": "Year",
			"item": [
				{
					"name": "/year/2025/songsFromPlaylists",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();\r",
									"\r",
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response body contains only tracks released in 2025\", function () {\r",
									"    jsonData.forEach(track => {\r",
									"        pm.expect(track.release_date.startsWith('2025')).to.be.true;\r",
									"    });\r",
									"});\r",
									"\r",
									"pm.test(\"Response body contains full details of each track\", function () {\r",
									"    jsonData.forEach(track => {\r",
									"        pm.expect(track.track_id).to.not.be.undefined;\r",
									"        pm.expect(track.track_name).to.not.be.undefined;\r",
									"        pm.expect(track.artists).to.not.be.undefined;\r",
									"        pm.expect(track.artists.length).to.be.greaterThan(0);\r",
									"        pm.expect(track.album_name).to.not.be.undefined;\r",
									"        pm.expect(track.release_date).to.not.be.undefined;\r",
									"    })\r",
									"});\r",
									"\r",
									"pm.test(\"Response body contains no duplicate tracks\", function () {  \r",
									"    let trackIds = jsonData.map(track => track.track_id);\r",
									"    let uniqueTrackIds = new Set(trackIds);\r",
									"    \r",
									"    pm.expect(uniqueTrackIds.size).to.eql(trackIds.length);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"ignoredPlaylistNameSubstrings\": [\r\n        \"Anyway here's Wonderwall\",\r\n        \"Go on then Nath, let's hear it\",\r\n        \"Glenn Wedding Join-ins\",\r\n        \"Addersons 25\",\r\n        \"Harry Styles Anthology\",\r\n        \"Kylie Minogue Anthology\",\r\n        \"Peter Gabriel Anthology\",\r\n        \"Jack White Anthology\",\r\n        \"Julian Casablancas Anthology\",\r\n        \"John Frusciante Anthology\",\r\n        \"Dave Grohl Anthology\",\r\n        \"Damon Albarn Anthology\",\r\n        \"Paul McCartney Anthology\",\r\n        \"Alex Turner Anothology\",\r\n        \"Theo Katzman Anthology\",\r\n        \"Josh Homme Anthology\",\r\n        \"Glenn Wedding Addersons Long-list\",\r\n        \"Addersons Setlist\",\r\n        \"Inter-set music\",\r\n        \"Adders80ns\",\r\n        \"Baby shower\",\r\n        \"Addersons Matt & Rachel wedding setlist\",\r\n        \"Inter Set Music\",\r\n        \"Matt & Rachel Wedding Setlist\",\r\n        \"PPC Sat 27th May 2023\",\r\n        \"New Year 23'/24'\",\r\n        \"Pete 60th drive\",\r\n        \"Budapest 2018\",\r\n        \"Ukraine 2018\",\r\n        \"Redwood Christmas Party 2018\",\r\n        \"Kiev 2019\",\r\n        \"Engagement Party\",\r\n        \"Glenn's 23rd Bday\",\r\n        \"Redwood Christmas Party 2019\",\r\n        \"NYE2019\",\r\n        \"Drive To Wales '20\",\r\n        \"Bar\",\r\n        \"Ambient\",\r\n        \"Top 10 Christmas Songs\",\r\n        \"Eurovision roadtrip\",\r\n        \"Redrock 21\",\r\n        \"Christmas Party 21 Suggestions\",\r\n        \"Cal “Housewarming “ BBQ\",\r\n        \"Drive to Wales '22\",\r\n        \"Housewarming 2022\",\r\n        \"RedRock 22\",\r\n        \"SETI\",\r\n        \"PrMattctice (& Rachel)\",\r\n        \"Curry\",\r\n        \"Aviation\",\r\n        \"Roast  chicken\",\r\n        \"Wingspan\",\r\n        \"Terraforming Mars\",\r\n        \"Shrek: The Gig\",\r\n        \"Hot hot burny burny\",\r\n        \"Wine\",\r\n        \"Gingerbread\",\r\n        \"Friday Night\",\r\n        \"Pizza\",\r\n        \"The New Addersons\",\r\n        \"Intro Quiz\",\r\n        \"Listen Later\"\r\n    ],\r\n    \"saveObject\": true\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/year/2025/songsFromPlaylists",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"year",
								"2025",
								"songsFromPlaylists"
							]
						}
					},
					"response": []
				},
				{
					"name": "/year/2025/likedSongs",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();\r",
									"\r",
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response body contains only tracks released in 2025\", function () {\r",
									"    jsonData.forEach(track => {\r",
									"        pm.expect(track.release_date.startsWith('2025')).to.be.true;\r",
									"    });\r",
									"});\r",
									"\r",
									"pm.test(\"Response body contains full details of each track\", function () {\r",
									"    jsonData.forEach(track => {\r",
									"        pm.expect(track.track_id).to.not.be.undefined;\r",
									"        pm.expect(track.track_name).to.not.be.undefined;\r",
									"        pm.expect(track.artists).to.not.be.undefined;\r",
									"        pm.expect(track.artists.length).to.be.greaterThan(0);\r",
									"        pm.expect(track.album_name).to.not.be.undefined;\r",
									"        pm.expect(track.release_date).to.not.be.undefined;\r",
									"    })\r",
									"});\r",
									"\r",
									"pm.test(\"Response body contains no duplicate tracks\", function () {  \r",
									"    let trackIds = jsonData.map(track => track.track_id);\r",
									"    let uniqueTrackIds = new Set(trackIds);\r",
									"    \r",
									"    pm.expect(uniqueTrackIds.size).to.eql(trackIds.length);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"saveObject\": true\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/year/2025/likedSongs",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"year",
								"2025",
								"likedSongs"
							]
						}
					},
					"response": []
				},
				{
					"name": "/year/2025/suggestions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();\r",
									"\r",
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response body contains only tracks released in 2025\", function () {\r",
									"    jsonData.forEach(track => {\r",
									"        pm.expect(track.release_date.startsWith('2025')).to.be.true;\r",
									"    });\r",
									"});\r",
									"\r",
									"pm.test(\"Response body contains full details of each track\", function () {\r",
									"    jsonData.forEach(track => {\r",
									"        pm.expect(track.track_id).to.not.be.undefined;\r",
									"        pm.expect(track.track_name).to.not.be.undefined;\r",
									"        pm.expect(track.artists).to.not.be.undefined;\r",
									"        pm.expect(track.artists.length).to.be.greaterThan(0);\r",
									"        pm.expect(track.album_name).to.not.be.undefined;\r",
									"        pm.expect(track.release_date).to.not.be.undefined;\r",
									"    })\r",
									"});\r",
									"\r",
									"pm.test(\"Response body contains no duplicate tracks\", function () {  \r",
									"    let trackIds = jsonData.map(track => track.track_id);\r",
									"    let uniqueTrackIds = new Set(trackIds);\r",
									"    \r",
									"    pm.expect(uniqueTrackIds.size).to.eql(trackIds.length);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"saveObject\": true\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/year/2025/suggestions",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"year",
								"2025",
								"suggestions"
							]
						}
					},
					"response": []
				},
				{
					"name": "/year/2025/analysis",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();\r",
									"\r",
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response body contains liked songs, songs from playlists and suggestions\", function () {\r",
									"    pm.expect(jsonData.liked).to.not.be.undefined;\r",
									"    pm.expect(jsonData.on_playlists).to.not.be.undefined;\r",
									"    pm.expect(jsonData.suggestions).to.not.be.undefined;\r",
									"    pm.expect(jsonData.liked.length).to.be.greaterThan(0);\r",
									"    pm.expect(jsonData.on_playlists.length).to.be.greaterThan(0);\r",
									"    pm.expect(jsonData.suggestions.length).to.be.greaterThan(0);\r",
									"});\r",
									"\r",
									"pm.test(\"All tracks are from 2025\", function () {\r",
									"    [\"liked\", \"on_playlists\", \"suggestions\"].forEach(category => {\r",
									"        jsonData[category].forEach(track => {\r",
									"            pm.expect(track.release_date.startsWith(\"2025\")).to.be.true;\r",
									"        });\r",
									"    });\r",
									"});\r",
									"\r",
									"pm.test(\"All tracks contain required fields\", function () {\r",
									"    [\"liked\", \"on_playlists\", \"suggestions\"].forEach(category => {\r",
									"        jsonData[category].forEach(track => {\r",
									"            pm.expect(track.track_name).to.not.be.undefined;\r",
									"            pm.expect(track.artists).to.not.be.undefined;\r",
									"            pm.expect(track.artists.length).to.be.greaterThan(0);\r",
									"            pm.expect(track.album_name).to.not.be.undefined;\r",
									"            pm.expect(track.release_date).to.not.be.undefined;\r",
									"            pm.expect(track.popularity).to.not.be.undefined;\r",
									"        });\r",
									"    });\r",
									"});\r",
									"\r",
									"pm.test(\"No duplicate tracks across all categories based on full TrackInfo object\", function () {\r",
									"    const categories = [\"liked\", \"on_playlists\", \"suggestions\"];\r",
									"    let trackMap = {};\r",
									"\r",
									"    categories.forEach(category => {\r",
									"        if (!jsonData[category]) return;\r",
									"\r",
									"        jsonData[category].forEach(track => {\r",
									"            const serializedTrack = JSON.stringify(track);\r",
									"\r",
									"            if (!trackMap[serializedTrack]) {\r",
									"                trackMap[serializedTrack] = [];\r",
									"            }\r",
									"            trackMap[serializedTrack].push({\r",
									"                category: category,\r",
									"                track_name: track.track_name || \"unknown\"\r",
									"            });\r",
									"        });\r",
									"    });\r",
									"\r",
									"    let duplicates = [];\r",
									"    for (let serializedTrack in trackMap) {\r",
									"        if (trackMap[serializedTrack].length > 1) {\r",
									"            duplicates.push({\r",
									"                track: JSON.parse(serializedTrack),\r",
									"                occurrences: trackMap[serializedTrack]\r",
									"            });\r",
									"        }\r",
									"    }\r",
									"\r",
									"    pm.expect(\r",
									"        duplicates.length,\r",
									"        `Duplicate tracks found:\\n${JSON.stringify(duplicates, null, 2)}`\r",
									"    ).to.eql(0);\r",
									"});\r",
									"\r",
									"\r",
									"pm.test(\"Tracks are sorted by popularity descending in each category\", function () {\r",
									"    [\"liked\", \"on_playlists\", \"suggestions\"].forEach(category => {\r",
									"        let tracks = jsonData[category];\r",
									"        for (let i = 1; i < tracks.length; i++) {\r",
									"            pm.expect(tracks[i - 1].popularity).to.be.at.least(tracks[i].popularity);\r",
									"        }\r",
									"    });\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"ignoredPlaylistNameSubstrings\": [\r\n        \"Anyway here's Wonderwall\",\r\n        \"Go on then Nath, let's hear it\",\r\n        \"Glenn Wedding Join-ins\",\r\n        \"Addersons 25\",\r\n        \"Harry Styles Anthology\",\r\n        \"Kylie Minogue Anthology\",\r\n        \"Peter Gabriel Anthology\",\r\n        \"Jack White Anthology\",\r\n        \"Julian Casablancas Anthology\",\r\n        \"John Frusciante Anthology\",\r\n        \"Dave Grohl Anthology\",\r\n        \"Damon Albarn Anthology\",\r\n        \"Paul McCartney Anthology\",\r\n        \"Alex Turner Anothology\",\r\n        \"Theo Katzman Anthology\",\r\n        \"Josh Homme Anthology\",\r\n        \"Glenn Wedding Addersons Long-list\",\r\n        \"Addersons Setlist\",\r\n        \"Inter-set music\",\r\n        \"Adders80ns\",\r\n        \"Baby shower\",\r\n        \"Addersons Matt & Rachel wedding setlist\",\r\n        \"Inter Set Music\",\r\n        \"Matt & Rachel Wedding Setlist\",\r\n        \"PPC Sat 27th May 2023\",\r\n        \"New Year 23'/24'\",\r\n        \"Pete 60th drive\",\r\n        \"Budapest 2018\",\r\n        \"Ukraine 2018\",\r\n        \"Redwood Christmas Party 2018\",\r\n        \"Kiev 2019\",\r\n        \"Engagement Party\",\r\n        \"Glenn's 23rd Bday\",\r\n        \"Redwood Christmas Party 2019\",\r\n        \"NYE2019\",\r\n        \"Drive To Wales '20\",\r\n        \"Bar\",\r\n        \"Ambient\",\r\n        \"Top 10 Christmas Songs\",\r\n        \"Eurovision roadtrip\",\r\n        \"Redrock 21\",\r\n        \"Christmas Party 21 Suggestions\",\r\n        \"Cal “Housewarming “ BBQ\",\r\n        \"Drive to Wales '22\",\r\n        \"Housewarming 2022\",\r\n        \"RedRock 22\",\r\n        \"SETI\",\r\n        \"PrMattctice (& Rachel)\",\r\n        \"Curry\",\r\n        \"Aviation\",\r\n        \"Roast  chicken\",\r\n        \"Wingspan\",\r\n        \"Terraforming Mars\",\r\n        \"Shrek: The Gig\",\r\n        \"Hot hot burny burny\",\r\n        \"Wine\",\r\n        \"Gingerbread\",\r\n        \"Friday Night\",\r\n        \"Pizza\",\r\n        \"The New Addersons\",\r\n        \"Intro Quiz\",\r\n        \"Listen Later\"\r\n    ],\r\n    \"saveObject\": true,\r\n    \"makePlaylists\": true\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/year/2025/analysis",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"year",
								"2025",
								"analysis"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Graphs",
			"item": [
				{
					"name": "/graphs/topTracks",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response type is image/png\", function () {\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\"))\r",
									"        .to.include(\"image/png\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/graphs/topTracksByYear?time_range=short_term",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"graphs",
								"topTracksByYear"
							],
							"query": [
								{
									"key": "time_range",
									"value": "short_term"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/graphs/topTrackHeatmap",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response type is image/png\", function () {\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\"))\r",
									"        .to.include(\"image/png\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/graphs/topTrackHeatmap?time_range=long_term",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"graphs",
								"topTrackHeatmap"
							],
							"query": [
								{
									"key": "time_range",
									"value": "long_term"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/graphs/playlistTracksByYear",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response type is image/png\", function () {\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\"))\r",
									"        .to.include(\"image/png\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/graphs/playlistTracksByYear?playlist_id=2dctDp763ysCIRWiYRuZ9U",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"graphs",
								"playlistTracksByYear"
							],
							"query": [
								{
									"key": "playlist_id",
									"value": "2dctDp763ysCIRWiYRuZ9U"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "/me",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"var jsonData = pm.response.json();\r",
							"\r",
							"pm.test(\"Response status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Response body contains the field 'display_name'\", function () {\r",
							"    pm.expect(jsonData).to.have.property('display_name');\r",
							"});\r",
							"\r",
							"pm.test(\"Response body contains the field 'uri'\", function () {\r",
							"    pm.expect(jsonData).to.have.property('uri');\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/songsFromPlaylists/2025",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"songsFromPlaylists",
						"2025"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "oauth2",
		"oauth2": [
			{
				"key": "scope",
				"value": "user-read-email user-read-private playlist-modify-private playlist-modify-public playlist-read-private user-library-read user-top-read",
				"type": "string"
			},
			{
				"key": "clientSecret",
				"value": "{{spotifyClientSecret}}",
				"type": "string"
			},
			{
				"key": "clientId",
				"value": "{{spotifyClientId}}",
				"type": "string"
			},
			{
				"key": "accessTokenUrl",
				"value": "https://accounts.spotify.com/api/token",
				"type": "string"
			},
			{
				"key": "authUrl",
				"value": "https://accounts.spotify.com/authorize",
				"type": "string"
			},
			{
				"key": "redirect_uri",
				"value": "https://nonemancipative-nonexhaustive-lucius.ngrok-free.dev/callback",
				"type": "string"
			},
			{
				"key": "useBrowser",
				"value": false,
				"type": "boolean"
			},
			{
				"key": "grant_type",
				"value": "authorization_code",
				"type": "string"
			},
			{
				"key": "tokenName",
				"value": "Spotify Auth",
				"type": "string"
			},
			{
				"key": "addTokenTo",
				"value": "header",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": ""
		}
	]
}